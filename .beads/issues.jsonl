{"id":"mage-3a3","title":"Implement spec browser data layer (specModel.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/specModel.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8: Specification Browser)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- docs/specs/use-cases/*.yaml (example YAML structure to parse)\n- docs/specs/product-requirements/*.yaml (example PRD YAML structure to parse)\n\nFiles to Create:\n- vscode-extension/src/specModel.ts\n\nRequirements:\n- Read and parse docs/specs/use-cases/*.yaml, docs/specs/product-requirements/*.yaml, docs/specs/test-suites/*.yaml using js-yaml or vscode.workspace.fs\n- Build in-memory SpecGraph: use cases indexed by id, PRDs indexed by id, touchpoints linking use cases to PRD requirement IDs\n- SpecGraph.getUseCase(id), .getPrd(id), .listUseCases(), .listPrds(), .listTestSuites()\n- SpecGraph.getSourceFiles(prdId): grep pkg/ and magefiles/ for occurrences of the PRD ID string, return [{file, line}]\n- Cache the graph; invalidate when FileSystemWatcher fires on docs/specs/\n- Export SpecGraph class and SpecNode types (UseCase, Prd, TestSuite, Touchpoint, SourceRef)\n\nAcceptance Criteria:\n- specModel.ts compiles with tsc (no type errors)\n- SpecGraph correctly parses the existing use-case and PRD YAML files\n- getSourceFiles returns file paths and line numbers where PRD IDs appear\n- Cache invalidation clears and rebuilds when docs/specs/ changes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:46Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:46Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-3a3","depends_on_id":"mage-u4p","type":"blocks","created_at":"2026-02-23T08:45:45Z","created_by":"petardjukic","metadata":"{}"},{"issue_id":"mage-3a3","depends_on_id":"mage-zh8","type":"blocks","created_at":"2026-02-23T08:45:45Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-3m6","title":"Implement spec browser tree view (specBrowser.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/specBrowser.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- vscode-extension/src/specModel.ts (SpecGraph API, must exist first)\n- vscode-extension/src/extension.ts (how to register TreeDataProvider)\n\nFiles to Create/Modify:\n- vscode-extension/src/specBrowser.ts (create)\n- vscode-extension/src/extension.ts (register SpecBrowserProvider)\n- vscode-extension/package.json (add mage-orchestrator.specs view to activitybar)\n\nRequirements:\n- SpecBrowserProvider implements vscode.TreeDataProvider\u003cSpecTreeItem\u003e\n- Root nodes: 'Use Cases', 'Requirements', 'Test Suites'\n- Use Cases children: one node per use case (id + title), expanding to show touchpoints\n- Each touchpoint node links to the referenced PRD requirement\n- Each requirement node expands to show source file refs from SpecGraph.getSourceFiles()\n- Clicking a spec node opens the YAML file: vscode.window.showTextDocument(uri)\n- Clicking a source ref opens the file at the correct line: vscode.window.showTextDocument(uri, {selection: range})\n- refresh() method called when SpecGraph cache invalidates\n\nAcceptance Criteria:\n- Tree view appears in VS Code activity bar\n- Use cases list matches docs/specs/use-cases/*.yaml\n- Expanding a use case shows its touchpoint requirement links\n- Clicking a source ref opens the correct file at the correct line\n- Tree refreshes when docs/specs/ files change","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:57Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:57Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-3m6","depends_on_id":"mage-3a3","type":"blocks","created_at":"2026-02-23T08:45:57Z","created_by":"petardjukic","metadata":"{}"},{"issue_id":"mage-3m6","depends_on_id":"mage-fzl","type":"blocks","created_at":"2026-02-23T08:45:57Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-6ul","title":"Add R10 Extension Build and Installation to prd006","description":"deliverable_type: documentation\nformat_rule: prd-format (update existing)\noutput_path: docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (full)\n- docs/constitutions/design.yaml (prd-format rules)\n\nFiles to Modify:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequirements:\nAdd G7 goal for extension build and installation via mage targets. Add R10 requirement group with:\n- R10.1: mage vscode:push must compile TypeScript, package as .vsix, and install into VS Code\n- R10.2: Push must run npm install in the extension directory before compiling\n- R10.3: Push must verify required tools (npm, code CLI) are available before proceeding\n- R10.4: mage vscode:pop must uninstall the extension from VS Code using the code CLI\n- R10.5: Push must log each step (dependency install, compile, package, install) via the orchestrator logging pattern\n\nAdd corresponding acceptance criteria for push/pop targets.\n\nAcceptance Criteria:\n- R10 added to prd006 in correct prd-format structure\n- G7 added to goals list\n- R10 describes full push flow (verify tools, npm install, compile, package, install)\n- R10 describes pop flow (uninstall via code CLI)\n- Acceptance criteria updated with push/pop verification\n- mage analyze passes after update","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T14:16:59Z","created_by":"petardjukic","updated_at":"2026-02-23T14:16:59Z","labels":["documentation","rel02.0"]}
{"id":"mage-99k","title":"Implement code-to-spec traceability CodeLens (traceability.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/traceability.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R9)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- vscode-extension/src/specModel.ts (SpecGraph for resolving tag to file path)\n- vscode-extension/src/extension.ts (how to register CodeLensProvider)\n\nFiles to Create/Modify:\n- vscode-extension/src/traceability.ts (create)\n- vscode-extension/src/extension.ts (register TraceabilityProvider for Go files)\n- vscode-extension/package.json (add 'mageOrchestrator.viewRequirement' command)\n\nRequirements:\n- TraceabilityProvider implements vscode.CodeLensProvider for language 'go'\n- Scans document lines for patterns: '// prd: \u003cprd-id\u003e \u003creq-id\u003e' and '// uc: \u003cuc-id\u003e'\n- Each match produces a CodeLens with title 'View Requirement' at that line\n- Clicking executes mageOrchestrator.viewRequirement command with the prd-id/uc-id argument\n- viewRequirement command resolves id to file path via SpecGraph, opens with vscode.window.showTextDocument\n- If id not found in SpecGraph, shows vscode.window.showWarningMessage('Spec not found: \u003cid\u003e')\n\nAcceptance Criteria:\n- CodeLens appears above each '// prd:' and '// uc:' comment in Go source files\n- Clicking 'View Requirement' opens the correct docs/specs/*.yaml file\n- Unknown ids show a warning message instead of an error\n- TraceabilityProvider registered in extension.ts activate()","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:46:06Z","created_by":"petardjukic","updated_at":"2026-02-23T13:46:06Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-99k","depends_on_id":"mage-3a3","type":"blocks","created_at":"2026-02-23T08:46:06Z","created_by":"petardjukic","metadata":"{}"},{"issue_id":"mage-99k","depends_on_id":"mage-fzl","type":"blocks","created_at":"2026-02-23T08:46:06Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-9q0","title":"Create rel02.0-uc004 Issue Tracker View use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc004-issue-tracker-view.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R4: Issue Tracker, R5: Metrics Dashboard)\n- docs/specs/product-requirements/prd005-metrics-collection.yaml (InvocationRecord format)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc004-issue-tracker-view.yaml\n\nSummary: Developer opens the issues view in VS Code and sees all beads issues grouped by status (open, in_progress, closed). Expanding an issue shows description, dependencies, and InvocationRecord metrics (tokens, LOC delta, duration) from issue comments. The view auto-refreshes when .beads/issues.jsonl changes.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers issue listing, status grouping, InvocationRecord display, auto-refresh\n- Touchpoints reference prd006 R4 requirements\n- mage analyze passes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:15Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:15Z","labels":["documentation","rel02.0"]}
{"id":"mage-a2j","title":"Implement generation browser tree view (generationBrowser.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/generationBrowser.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2: Generation Browser, R6: Config View)\n- docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (tag naming: {prefix}*-start/finished/merged/abandoned)\n- vscode-extension/src/extension.ts (how to register TreeDataProvider)\n- vscode-extension/src/commands.ts (switch command for context menu)\n\nFiles to Create/Modify:\n- vscode-extension/src/generationBrowser.ts (create)\n- vscode-extension/src/extension.ts (register GenerationBrowserProvider for mage-orchestrator.status view)\n- vscode-extension/package.json (add context menu actions to view)\n\nRequirements:\n- GenerationBrowserProvider implements vscode.TreeDataProvider\u003cGenerationItem\u003e\n- Reads git tags via child_process.exec('git tag --list') to find generations\n- Derives lifecycle state from tag suffixes: has -start (created), has -finished (finished), has -merged (merged), has -abandoned (abandoned)\n- Shows version tag (v[REL].[DATE].[REVISION]) per generation if one exists\n- Current generation (active branch matches gen prefix) shows distinct icon (e.g., codicon 'play')\n- Child nodes show lifecycle tags and version tag\n- Context menu: 'Switch to Generation' calls mageOrchestrator.switch command\n- Refreshes via FileSystemWatcher on .git/refs/\n\nAcceptance Criteria:\n- Status view lists all generations with correct lifecycle state\n- Current generation distinguished visually\n- Version tags displayed when present\n- Switch context menu action triggers the switch command\n- Tree refreshes when .git/refs/ changes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:46:19Z","created_by":"petardjukic","updated_at":"2026-02-23T13:46:19Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-a2j","depends_on_id":"mage-fzl","type":"blocks","created_at":"2026-02-23T08:46:18Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-a8d","title":"Implement vscode:push and vscode:pop mage targets","description":"deliverable_type: code\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R10)\n- magefiles/magefile.go (namespace pattern, scaffold:push/pop as model)\n- pkg/orchestrator/scaffold.go (push/pop implementation pattern)\n- pkg/orchestrator/commands.go (exec.Command wrappers)\n- vscode-extension/package.json (extension manifest)\n\nFiles to Create:\n- pkg/orchestrator/vscode.go (~120-180 lines)\n\nFiles to Modify:\n- magefiles/magefile.go (add Vscode namespace + Push/Pop methods, ~15 lines)\n- vscode-extension/package.json (add @vscode/vsce to devDependencies)\n\nRequirements:\n1. Create pkg/orchestrator/vscode.go with VscodePush() and VscodePop() methods on Orchestrator\n2. VscodePush flow: verify npm and code CLI exist -\u003e npm install in vscode-extension/ -\u003e npm run compile -\u003e npx @vscode/vsce package --no-dependencies -\u003e code --install-extension \u003cvsix path\u003e\n3. VscodePop flow: code --uninstall-extension mesh-intelligence.mage-orchestrator\n4. Log each step via logf() with timestamps\n5. Return actionable error messages when npm or code CLI is missing\n6. Add Vscode mg.Namespace to magefiles/magefile.go with Push() and Pop() methods following the scaffold namespace pattern\n7. Add @vscode/vsce to vscode-extension/package.json devDependencies\n\nDesign Decisions:\n- Use exec.Command directly (consistent with commands.go pattern) rather than shell invocation\n- The vscode-extension/ directory path is derived from the orchestrator repo root (os.Getwd), not from Config\n- vsix filename is derived from package.json name and version fields\n- Push always rebuilds from source (no caching)\n\nAcceptance Criteria:\n- mage vscode:push compiles the extension and installs it into VS Code\n- mage vscode:pop uninstalls the extension from VS Code\n- Both targets appear in mage -l output under the Vscode namespace\n- Push fails with clear error if npm is not installed\n- Push fails with clear error if code CLI is not installed\n- Pop is idempotent (succeeds even if extension is not installed)\n- mage analyze passes\n- go vet ./... passes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T14:17:35Z","created_by":"petardjukic","updated_at":"2026-02-23T14:17:35Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-a8d","depends_on_id":"mage-6ul","type":"blocks","created_at":"2026-02-23T09:17:35Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-ahl","title":"Create rel02.0-uc003 Branch Comparison use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc003-branch-comparison.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R3: Branch and Tag Comparison)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (tag naming conventions)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc003-branch-comparison.yaml\n\nSummary: Developer selects two version tags (v[REL].[DATE].[REV]) from a quick-pick list and sees a file-level summary of changes between them. Each changed file is clickable to open a VS Code diff editor. Developer can also compare two generation branches.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers tag selection, file summary, diff editor launch, generation branch comparison\n- Touchpoints reference prd006 R3 requirements\n- mage analyze passes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:22Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:22Z","labels":["documentation","rel02.0"]}
{"id":"mage-bhc","title":"Create rel02.0-uc002 Generation Browser use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2: Generation Browser Tree View)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml (example)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (lifecycle states)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n\nSummary: Developer opens VS Code status view and sees a tree of all generations derived from git tags. Each generation shows lifecycle state (-start, -finished, -merged, -abandoned), version tags, and highlights the current branch. Developer can switch to a generation from the tree context menu.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers listing generations, showing lifecycle state, current branch indicator, switch action\n- Touchpoints reference prd006 R2 requirements\n- mage analyze passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:14Z","created_by":"petardjukic","updated_at":"2026-02-23T14:09:26Z","closed_at":"2026-02-23T14:09:26Z","close_reason":"Closed","labels":["documentation","rel02.0"],"comments":[{"id":2,"issue_id":"mage-bhc","author":"petardjukic","text":"tokens: 22000","created_at":"2026-02-23T14:09:26Z"}]}
{"id":"mage-fzl","title":"Implement extension infrastructure and lifecycle commands","description":"deliverable_type: code\noutput: vscode-extension/src/\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R1: Lifecycle Commands, R7: Infrastructure)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml\n- vscode-extension/src/extension.ts (current stub)\n- vscode-extension/package.json (current commands and views)\n\nFiles to Create/Modify:\n- vscode-extension/src/extension.ts (replace stub with real activate/deactivate)\n- vscode-extension/src/commands.ts (all lifecycle commands)\n- vscode-extension/package.json (register all commands and views)\n\nRequirements:\n- activate() registers all commands, tree providers, watchers, output channel\n- Commands: mageOrchestrator.start, .run, .resume, .stop, .reset, .switch, .cobblerMeasure, .cobblerStitch\n- Each command executes the corresponding mage target in an integrated terminal (vscode.window.createTerminal)\n- Start, Stop, Reset show confirmation dialogs (vscode.window.showWarningMessage)\n- Switch shows quick-pick of generation branches from git branch list\n- deactivate() disposes all watchers, terminals, subscriptions\n- Output channel named 'Mage Orchestrator' for error logging\n- FileSystemWatcher on .beads/, .git/refs/, configuration.yaml\n\nAcceptance Criteria:\n- All commands appear in Command Palette when configuration.yaml exists\n- Each command runs the correct mage target in integrated terminal\n- Destructive commands show confirmation dialog\n- Switch shows branch quick-pick\n- Extension activates only when configuration.yaml present (workspaceContains)\n- mage test:unit passes (TypeScript compilation via tsc)","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:35Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:35Z","labels":["code","rel02.0","vscode"],"dependencies":[{"issue_id":"mage-fzl","depends_on_id":"mage-u4p","type":"blocks","created_at":"2026-02-23T08:45:34Z","created_by":"petardjukic","metadata":"{}"},{"issue_id":"mage-fzl","depends_on_id":"mage-zh8","type":"blocks","created_at":"2026-02-23T08:45:34Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-u4p","title":"Add R8 Specification Browser and R9 Code-to-Spec Traceability to prd006","description":"deliverable_type: documentation\nformat_rule: prd-format (update existing)\noutput_path: docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (full)\n- docs/ARCHITECTURE.yaml\n- docs/constitutions/design.yaml (prd-format rules)\n\nFiles to Modify:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequirements:\nR8 - Specification Browser: tree panel listing use cases (docs/specs/use-cases/*.yaml). Each use case node expands to PRD touchpoints; each requirement node expands to source files matching grep of PRD ID in pkg/. Clicking any node opens the corresponding YAML or source file. Top-level groups for PRDs and test suites. Refreshes via FileSystemWatcher on docs/specs/.\n\nR9 - Code-to-Spec Traceability: CodeLensProvider for Go source files. Detects comments with pattern '// prd: \u003cprd-id\u003e \u003creq-id\u003e' and '// uc: \u003cuc-id\u003e'. Each tag renders a 'View Requirement' CodeLens that opens the referenced spec YAML.\n\nAcceptance Criteria:\n- R8 and R9 added to prd006 in correct prd-format structure\n- R8 describes spec tree view with navigation from use case to requirement to source\n- R9 defines tagging convention and CodeLens behavior\n- mage analyze passes after update","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:44:51Z","created_by":"petardjukic","updated_at":"2026-02-23T13:55:01Z","closed_at":"2026-02-23T13:55:01Z","close_reason":"Closed","labels":["documentation","rel02.0"],"comments":[{"id":1,"issue_id":"mage-u4p","author":"petardjukic","text":"tokens: 28000","created_at":"2026-02-23T13:55:00Z"}]}
{"id":"mage-zh8","title":"Create rel02.0-uc006 Specification Browser use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8 and R9, added by mage-u4p)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml (example use case)\n- docs/road-map.yaml (add uc006 to rel02.0 release)\n\nFiles to Create/Modify:\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml (create)\n- docs/road-map.yaml (add uc006 entry to rel02.0)\n\nRequired Sections (use-case-format):\nid, title, summary, actor, trigger, flow, touchpoints (linking to prd006 R8/R9), success_criteria, out_of_scope, dependencies, risks\n\nSummary: A developer opens the Specification Browser panel in VS Code and navigates from a use case to its PRD requirements, and from a requirement to the source files implementing it. Conversely, the developer opens a Go source file containing a prd: or uc: tag and uses the CodeLens to jump directly to the referenced spec document.\n\nAcceptance Criteria:\n- use-case-format YAML created at correct path\n- Covers both directions: spec-to-code and code-to-spec\n- Touchpoints reference prd006 R8 and R9\n- road-map.yaml updated with uc006 entry under rel02.0\n- mage analyze passes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:02Z","created_by":"petardjukic","updated_at":"2026-02-23T13:45:02Z","labels":["documentation","rel02.0"],"dependencies":[{"issue_id":"mage-zh8","depends_on_id":"mage-u4p","type":"blocks","created_at":"2026-02-23T08:45:02Z","created_by":"petardjukic","metadata":"{}"}]}
