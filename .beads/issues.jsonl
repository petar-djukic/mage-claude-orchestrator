{"id":"mage-claude-orchestrator-0lp","title":"VS Code Extension (rel02.0)","description":"Epic for release 02.0: VS Code extension for generation tracking, lifecycle management, branch comparison, issue visualization, and metrics dashboards.\n\n## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml\n- docs/road-map.yaml (release 02.0)\n- docs/ARCHITECTURE.md ยง Project Structure\n\n## Use Cases\n- rel02.0-uc001-lifecycle-commands\n- rel02.0-uc002-generation-browser\n- rel02.0-uc003-branch-comparison\n- rel02.0-uc004-issue-tracker-view\n- rel02.0-uc005-metrics-dashboard","status":"open","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:16:03.866317-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:16:03.866317-05:00"}
{"id":"mage-claude-orchestrator-0lp.1","title":"Extension infrastructure and activation","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R7)\n- vscode-extension/package.json\n- vscode-extension/src/extension.ts\n\n## Files to Create/Modify\n- vscode-extension/package.json (modify: add activationEvents)\n- vscode-extension/src/extension.ts (modify: implement activate/deactivate)\n- vscode-extension/src/outputChannel.ts (create)\n\n## Requirements\n- Add workspaceContains:configuration.yaml activation event (R7.1)\n- Create dedicated VS Code output channel named \"Mage Orchestrator\" (R7.5)\n- Set up FileSystemWatcher instances for .beads/, .git/refs/, and configuration.yaml (R7.2)\n- Dispose all watchers on deactivation (R7.3)\n- Handle missing files gracefully: no crash when configuration.yaml, .beads/, or .git/refs/ do not exist (R7.4)\n- Register all providers and commands in activate function (R7.6)\n\n## Design Decisions\n- Export watchers and output channel so other modules import them\n- Use a disposables array pattern pushed to context.subscriptions\n\n## Acceptance Criteria\n- Extension activates only when configuration.yaml is present in workspace\n- FileSystemWatchers fire callbacks on file changes in .beads/ and .git/refs/\n- Output channel receives log messages\n- Deactivation disposes all watchers without errors\n- Missing directories do not cause activation failure","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:16:18.462912-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:16:18.462912-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.1","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:16:18.463966-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.10","title":"Package.json finalization and compile verification","description":"Final task for rel02.0. Ensures all commands declared in contributes.commands, all views in contributes.views, context menus in contributes.menus, activation event set to workspaceContains:configuration.yaml. Adds js-yaml and @types/js-yaml dependencies. Verifies npm run compile succeeds with no TypeScript errors. All commands and views registered in manifest. Extension loads in VS Code without errors.","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:21:06.005782-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:21:06.005782-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.10","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:21:06.006694-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.2","title":"Git helpers and generation discovery","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2.2-R2.4)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (R1: tag naming)\n- pkg/orchestrator/generator.go (tag suffix patterns, GeneratorList logic)\n- .claude/rules/tagging.md (v[REL].[DATE].[REVISION] scheme)\n\n## Files to Create/Modify\n- vscode-extension/src/git.ts (create)\n\n## Requirements\n- List all generation tags by parsing output of git tag -l (R2.2)\n- Derive lifecycle state per generation from tag suffixes: -start, -finished, -merged, -abandoned (R2.3)\n- Find version tags matching v[REL].[DATE].[REVISION] pattern and associate them with their generation (R2.4)\n- Get current branch name (for highlighting current generation) (R2.5)\n- List generation branches (for switch quick-pick) (R1.3)\n- Parse git diff --name-status between two refs (for comparison view) (R3.3)\n- All functions must handle repos with no tags or no generation branches\n\n## Design Decisions\n- Shell out to git CLI (not a git library) for simplicity\n- Return typed interfaces: Generation { name, state, versionTag?, branch }\n- Use child_process.execFile for git commands\n\n## Acceptance Criteria\n- Given a repo with generation-2026-02-14-*-start and -merged tags, returns generation with state \"merged\"\n- Given a repo with a v0.20260214.0 tag, associates it with the correct generation\n- Returns current branch name correctly\n- Returns empty arrays for repos with no tags\n- git diff --name-status parsing returns file path, status (A/M/D) tuples","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:16:33.688179-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:16:33.688179-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.2","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:16:33.689451-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.3","title":"Configuration YAML parser","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R6)\n- docs/specs/product-requirements/prd001-orchestrator-core.yaml (R1: Config fields)\n- pkg/orchestrator/config.go (Config struct, field names, YAML tags)\n\n## Files to Create/Modify\n- vscode-extension/src/config.ts (create)\n- vscode-extension/package.json (modify: add js-yaml dependency)\n\n## Requirements\n- Parse configuration.yaml using js-yaml library (R6.1)\n- Extract and expose: module_path, binary_name, gen_prefix, cycles, max_stitch_issues, max_measure_issues, podman_image (R6.3)\n- Re-parse when FileSystemWatcher fires for configuration.yaml changes\n- Return typed OrchestratorConfig interface\n- Return sensible defaults when file is missing or fields are absent\n\n## Design Decisions\n- Add js-yaml as a runtime dependency and @types/js-yaml as dev dependency\n- Export a singleton ConfigProvider that caches parsed config and exposes an onDidChange event\n\n## Acceptance Criteria\n- Parses a valid configuration.yaml and returns all seven fields\n- Returns default/empty values when file is missing\n- Fires change event when configuration.yaml is modified\n- Handles malformed YAML without crashing","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:16:48.385852-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:16:48.385852-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.3","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:16:48.387149-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.4","title":"Beads JSONL parser and InvocationRecord extraction","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R4.2-R4.6)\n- pkg/orchestrator/cobbler.go (InvocationRecord, claudeTokens, diffRecord, LocSnapshot structs)\n- .beads/ directory structure (issues.jsonl format)\n\n## Files to Create/Modify\n- vscode-extension/src/beads.ts (create)\n\n## Requirements\n- Parse .beads/issues.jsonl line-by-line, one JSON object per line (R4.2)\n- Extract per issue: id, title, type (task/epic), status, description, dependencies, comments (R4.3-R4.5)\n- Parse InvocationRecord JSON from comments: caller, started_at, duration_s, tokens {input, output}, loc_before {production, test}, loc_after {production, test}, diff {files, insertions, deletions} (R4.6)\n- Group issues by status: open, in_progress, closed (R4.3)\n- Re-parse when FileSystemWatcher fires for .beads/ changes (R4.7)\n- Handle missing .beads/ directory and empty/malformed JSONL gracefully\n\n## Design Decisions\n- Export typed interfaces: BeadsIssue, InvocationRecord, TokenUsage, LocSnapshot, DiffStats\n- Export a BeadsProvider class with onDidChange event emitter\n- Parse comments as string array; attempt JSON.parse on each to detect InvocationRecords\n\n## Acceptance Criteria\n- Parses a multi-line JSONL file into an array of BeadsIssue objects\n- Groups issues correctly by status\n- Extracts InvocationRecord data from JSON comment strings\n- Returns empty array when .beads/issues.jsonl is missing\n- Fires change event when JSONL file is modified","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:17:02.581124-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:17:02.581124-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.4","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:17:02.582378-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.5","title":"Generation browser tree view","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2, R6.2-R6.3)\n- vscode-extension/src/git.ts (generation discovery, from task 2)\n- vscode-extension/src/config.ts (config provider, from task 3)\n\n## Files to Create/Modify\n- vscode-extension/src/generationTree.ts (create)\n- vscode-extension/package.json (modify: update views, add menus for context actions)\n\n## Requirements\n- Implement TreeDataProvider for mageOrchestrator.status view (R2.1)\n- Top-level nodes: one per generation, sorted by date descending (R2.2)\n- Each generation node shows lifecycle state with icon: created/running/finished/merged/abandoned (R2.3)\n- Each generation node shows version tag if present (R2.4)\n- Current generation (matching active git branch) gets a distinct icon or label decorator (R2.5)\n- Child nodes per generation: lifecycle tags and version tags (R2.6)\n- Collapsible Config node at bottom showing config summary values (R6.2, R6.3)\n- Context menu: \"Switch to Generation\" action (R2.7)\n- Context menu: \"Compare with...\" action (R2.8)\n- Refresh when .git/refs/ watcher fires (R2.9)\n\n## Design Decisions\n- Use vscode.ThemeIcon for state icons (e.g., \"pass\" for merged, \"circle-outline\" for created)\n- Register context menu commands in package.json contributes.menus\n\n## Acceptance Criteria\n- Tree lists all generations with correct state and version tag\n- Current generation is visually distinct\n- Config node shows values from configuration.yaml\n- Context menu actions are visible on right-click\n- Tree refreshes when git tags change","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:17:21.462933-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:17:21.462933-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.5","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:17:21.464057-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.6","title":"Issue tracker tree view","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R4)\n- vscode-extension/src/beads.ts (beads parser, from task 4)\n\n## Files to Create/Modify\n- vscode-extension/src/issueTree.ts (create)\n- vscode-extension/package.json (modify: add context menus for issues view)\n\n## Requirements\n- Implement TreeDataProvider for mageOrchestrator.issues view (R4.1)\n- Top-level nodes: status groups (open, in_progress, closed) as collapsible parents (R4.3)\n- Each issue node shows title, type (task/epic), and ID (R4.4)\n- Expanding an issue shows child nodes: description, dependencies list, comments (R4.5)\n- InvocationRecord comments render as formatted child nodes showing tokens (in/out), LOC delta, duration, diff stats (R4.6)\n- Refresh on .beads/ watcher event (R4.7)\n- Context menu: \"Open Issue Detail\" action opening a read-only text editor panel with full issue content (R4.8)\n\n## Design Decisions\n- Use different ThemeIcons per status group (e.g., \"circle-filled\" for open, \"loading~spin\" for in_progress, \"check\" for closed)\n- Format InvocationRecord as \"tokens: Xin/Yout | LOC: +N/-M | diff: F files +I/-D\" single-line labels\n\n## Acceptance Criteria\n- Issues grouped under status headers\n- Issue details (description, deps, comments) visible on expand\n- InvocationRecord data formatted and readable as child nodes\n- Open Issue Detail shows full content in a read-only editor\n- Tree refreshes when .beads/issues.jsonl changes","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:17:39.152436-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:17:39.152436-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.6","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:17:39.153427-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.7","title":"Lifecycle commands with terminal integration","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R1)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (operations list)\n- vscode-extension/src/git.ts (generation branch listing, from task 2)\n\n## Files to Create/Modify\n- vscode-extension/src/commands.ts (create)\n- vscode-extension/package.json (modify: register 6 new commands)\n\n## Requirements\n- Register VS Code commands: mageOrchestrator.generatorStart, .generatorRun, .generatorResume, .generatorStop, .generatorReset, .generatorSwitch (R1.1)\n- Each command executes the corresponding mage target in a VS Code integrated terminal (R1.2)\n- generatorSwitch prompts user with quick-pick list of available generation branches before executing (R1.3)\n- generatorStart, generatorStop, generatorReset show a confirmation dialog before executing (R1.4)\n- After terminal command completes, refresh all tree views (R1.5)\n- Disable commands invalid for current state: disable start when on a generation branch, disable run/resume/stop when on main (R1.6)\n\n## Design Decisions\n- Use vscode.window.createTerminal with sendText for command execution\n- Use setContext commands to toggle when clauses for command enablement\n- Terminal name: \"Mage Orchestrator\"\n\n## Acceptance Criteria\n- Each of the six commands runs the correct mage target in terminal\n- Switch shows quick-pick with generation branch names\n- Confirmation dialogs appear for destructive commands\n- Views refresh after command execution\n- Commands are disabled when state is invalid (e.g., start disabled on generation branch)","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:19:19.80275-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:19:19.80275-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.7","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:19:19.804017-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.8","title":"Branch and tag comparison view","description":"## Required Reading\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R3)\n- vscode-extension/src/git.ts (tag listing, diff parsing, from task 2)\n- .claude/rules/tagging.md (v[REL].[DATE].[REVISION] scheme)\n\n## Files to Create/Modify\n- vscode-extension/src/comparison.ts (create: command handlers)\n- vscode-extension/src/comparisonTree.ts (create: TreeDataProvider for diff file list)\n- vscode-extension/package.json (modify: register comparison commands, add comparison view)\n\n## Requirements\n- Register command to compare two version tags: prompt two quick-picks from all v[REL].[DATE].[REVISION] tags (R3.1, R3.2)\n- Register command to compare two generation branches: prompt two quick-picks from generation list (R3.5)\n- Display file-level summary as TreeDataProvider showing files grouped by directory with A/M/D status icons (R3.3, R3.6)\n- Clicking a file opens VS Code diff editor via vscode.commands.executeCommand(\"vscode.diff\", leftUri, rightUri) (R3.4)\n- Use git show ref:path to create temporary file URIs for the diff editor\n\n## Design Decisions\n- Add a third view \"mageOrchestrator.comparison\" to the activity bar container for the file list\n- Use git diff --name-status ref1 ref2 for file enumeration\n- Create virtual document provider or temp files for diff content\n\n## Acceptance Criteria\n- Tag comparison quick-pick shows all version tags sorted by date\n- Generation comparison quick-pick shows all generation branches\n- File summary shows correct A/M/D status per file, grouped by directory\n- Clicking a file opens a diff editor with correct left/right content\n- Works with both tag refs and branch refs","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:20:22.196602-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:20:22.196602-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.8","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:20:22.1979-05:00","created_by":"petardjukic"}]}
{"id":"mage-claude-orchestrator-0lp.9","title":"Metrics dashboard webview","description":"Implements prd006 R5. Creates vscode-extension/src/metricsDashboard.ts. Aggregates InvocationRecord data from beads JSONL. Displays token usage, LOC progression, diff stats, and durations as HTML tables in a webview panel. Refreshes on data change. No external charting libraries.","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-14T10:20:59.886172-05:00","created_by":"petardjukic","updated_at":"2026-02-14T10:20:59.886172-05:00","dependencies":[{"issue_id":"mage-claude-orchestrator-0lp.9","depends_on_id":"mage-claude-orchestrator-0lp","type":"parent-child","created_at":"2026-02-14T10:20:59.889299-05:00","created_by":"petardjukic"}]}
