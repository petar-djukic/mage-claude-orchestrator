{"id":"mage-1yh","title":"Measure output is non-deterministic across runs","description":"Two runs of cobbler:measure against the same project state produce different issues. The root cause is that the prompt gives Claude freedom on decisions that should be pinned in specifications.\n\nObserved differences between runs:\n- File naming (difftest.go vs testutils.go)\n- Struct shape (*FileExpectation vs map[string][]byte)\n- Timeout configurability choices\n- Requirement granularity (9 requirements vs 6)\n\n## Required fixes (ordered by impact)\n\n### 1. Pin design decisions in specs, not the prompt (highest impact)\nThe PRD leaves implementation choices open (file names, struct shapes, timeout config). The measure agent invents them differently each time. Fix: add these decisions to the PRD or use case directly. If prd001-testutils.yaml specifies \"the main file is difftest.go\" and \"use a FileExpectation struct, not a map\", Claude has nothing to invent.\n\n### 2. Add a golden example for the target utility\nThe prompt has a generic abstract example (ExampleType, pkg/types/example.go). A domain-specific example — a completed measure-issues.yaml from a previous successful generation — would anchor the style, granularity, and naming conventions. Add an examples field to the prompt that includes an actual previous approved issue.\n\n### 3. Constrain requirement granularity in planning constitution\nThe planning constitution (P2) constrains lines of code and file count, but says nothing about how many requirements or acceptance criteria to produce. One run gave 9 requirements, the other gave 6. Add a rule like \"target 5-8 requirements per code task\" to reduce this axis of variation.\n\n### 4. Prescribe file naming conventions\nNeither the prompt nor the constitution tells the model what to name Go source files. Add a rule to the planning constitution or a design decision in the PRD: \"name the main source file after the primary exported type or function, not the package name.\"\n\n### 5. Lower temperature (if the orchestrator supports it)\nThe orchestrator calls Claude via CLI. If it passes through API parameters, setting temperature: 0 would reduce randomness. This won't eliminate variance but helps.\n\n### 6. Post-hoc validation / schema enforcement\nAdd a validation step after measure that checks the output against a stricter schema — e.g., file names must match a pattern, struct form not map, requirement count within range. Reject and re-run if it doesn't conform.\n\n## Files to modify\n- pkg/orchestrator/measure.go — add temperature parameter, validation step\n- Default prompt templates (prompts/measure.yaml) — add golden example field\n- Default constitution (constitutions/planning.yaml) — add requirement granularity and file naming rules\n\n## Acceptance criteria\n- [ ] Two consecutive runs of measure against the same project state produce structurally equivalent issues\n- [ ] File names, struct shapes, and requirement counts are consistent\n- [ ] Golden example mechanism implemented and documented","status":"closed","priority":1,"issue_type":"bug","owner":"petar.djukic@gmail.com","created_at":"2026-02-24T03:46:27Z","created_by":"petardjukic","updated_at":"2026-02-24T03:53:23Z","closed_at":"2026-02-24T03:53:23Z","close_reason":"Closed"}
{"id":"mage-2rk","title":"Implement issue tracker tree view","description":"Implement a TreeDataProvider for the mageOrchestrator.issues view declared in package.json. The view should display beads issues grouped by status (open/closed), showing title, priority, and labels. Depends on the beads JSONL parser (mage-p2y) being implemented first.","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T20:00:52Z","created_by":"petardjukic","updated_at":"2026-02-24T19:16:08Z","closed_at":"2026-02-24T19:16:08Z","close_reason":"Closed"}
{"id":"mage-3a3","title":"Implement spec browser data layer (specModel.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/specModel.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8: Specification Browser)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- docs/specs/use-cases/*.yaml (example YAML structure to parse)\n- docs/specs/product-requirements/*.yaml (example PRD YAML structure to parse)\n\nFiles to Create:\n- vscode-extension/src/specModel.ts\n\nRequirements:\n- Read and parse docs/specs/use-cases/*.yaml, docs/specs/product-requirements/*.yaml, docs/specs/test-suites/*.yaml using js-yaml or vscode.workspace.fs\n- Build in-memory SpecGraph: use cases indexed by id, PRDs indexed by id, touchpoints linking use cases to PRD requirement IDs\n- SpecGraph.getUseCase(id), .getPrd(id), .listUseCases(), .listPrds(), .listTestSuites()\n- SpecGraph.getSourceFiles(prdId): grep pkg/ and magefiles/ for occurrences of the PRD ID string, return [{file, line}]\n- Cache the graph; invalidate when FileSystemWatcher fires on docs/specs/\n- Export SpecGraph class and SpecNode types (UseCase, Prd, TestSuite, Touchpoint, SourceRef)\n\nAcceptance Criteria:\n- specModel.ts compiles with tsc (no type errors)\n- SpecGraph correctly parses the existing use-case and PRD YAML files\n- getSourceFiles returns file paths and line numbers where PRD IDs appear\n- Cache invalidation clears and rebuilds when docs/specs/ changes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:46Z","created_by":"petardjukic","updated_at":"2026-02-23T17:53:41Z","closed_at":"2026-02-23T17:53:41Z","close_reason":"Closed"}
{"id":"mage-3m6","title":"Implement spec browser tree view (specBrowser.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/specBrowser.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- vscode-extension/src/specModel.ts (SpecGraph API, must exist first)\n- vscode-extension/src/extension.ts (how to register TreeDataProvider)\n\nFiles to Create/Modify:\n- vscode-extension/src/specBrowser.ts (create)\n- vscode-extension/src/extension.ts (register SpecBrowserProvider)\n- vscode-extension/package.json (add mage-orchestrator.specs view to activitybar)\n\nRequirements:\n- SpecBrowserProvider implements vscode.TreeDataProvider\u003cSpecTreeItem\u003e\n- Root nodes: 'Use Cases', 'Requirements', 'Test Suites'\n- Use Cases children: one node per use case (id + title), expanding to show touchpoints\n- Each touchpoint node links to the referenced PRD requirement\n- Each requirement node expands to show source file refs from SpecGraph.getSourceFiles()\n- Clicking a spec node opens the YAML file: vscode.window.showTextDocument(uri)\n- Clicking a source ref opens the file at the correct line: vscode.window.showTextDocument(uri, {selection: range})\n- refresh() method called when SpecGraph cache invalidates\n\nAcceptance Criteria:\n- Tree view appears in VS Code activity bar\n- Use cases list matches docs/specs/use-cases/*.yaml\n- Expanding a use case shows its touchpoint requirement links\n- Clicking a source ref opens the correct file at the correct line\n- Tree refreshes when docs/specs/ files change","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:57Z","created_by":"petardjukic","updated_at":"2026-02-23T17:59:27Z","closed_at":"2026-02-23T17:59:27Z","close_reason":"Closed"}
{"id":"mage-6ul","title":"Add R10 Extension Build and Installation to prd006","description":"deliverable_type: documentation\nformat_rule: prd-format (update existing)\noutput_path: docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (full)\n- docs/constitutions/design.yaml (prd-format rules)\n\nFiles to Modify:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequirements:\nAdd G7 goal for extension build and installation via mage targets. Add R10 requirement group with:\n- R10.1: mage vscode:push must compile TypeScript, package as .vsix, and install into VS Code\n- R10.2: Push must run npm install in the extension directory before compiling\n- R10.3: Push must verify required tools (npm, code CLI) are available before proceeding\n- R10.4: mage vscode:pop must uninstall the extension from VS Code using the code CLI\n- R10.5: Push must log each step (dependency install, compile, package, install) via the orchestrator logging pattern\n\nAdd corresponding acceptance criteria for push/pop targets.\n\nAcceptance Criteria:\n- R10 added to prd006 in correct prd-format structure\n- G7 added to goals list\n- R10 describes full push flow (verify tools, npm install, compile, package, install)\n- R10 describes pop flow (uninstall via code CLI)\n- Acceptance criteria updated with push/pop verification\n- mage analyze passes after update","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T14:16:59Z","created_by":"petardjukic","updated_at":"2026-02-23T14:22:07Z","closed_at":"2026-02-23T14:22:07Z","close_reason":"Closed"}
{"id":"mage-99k","title":"Implement code-to-spec traceability CodeLens (traceability.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/traceability.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R9)\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n- vscode-extension/src/specModel.ts (SpecGraph for resolving tag to file path)\n- vscode-extension/src/extension.ts (how to register CodeLensProvider)\n\nFiles to Create/Modify:\n- vscode-extension/src/traceability.ts (create)\n- vscode-extension/src/extension.ts (register TraceabilityProvider for Go files)\n- vscode-extension/package.json (add 'mageOrchestrator.viewRequirement' command)\n\nRequirements:\n- TraceabilityProvider implements vscode.CodeLensProvider for language 'go'\n- Scans document lines for patterns: '// prd: \u003cprd-id\u003e \u003creq-id\u003e' and '// uc: \u003cuc-id\u003e'\n- Each match produces a CodeLens with title 'View Requirement' at that line\n- Clicking executes mageOrchestrator.viewRequirement command with the prd-id/uc-id argument\n- viewRequirement command resolves id to file path via SpecGraph, opens with vscode.window.showTextDocument\n- If id not found in SpecGraph, shows vscode.window.showWarningMessage('Spec not found: \u003cid\u003e')\n\nAcceptance Criteria:\n- CodeLens appears above each '// prd:' and '// uc:' comment in Go source files\n- Clicking 'View Requirement' opens the correct docs/specs/*.yaml file\n- Unknown ids show a warning message instead of an error\n- TraceabilityProvider registered in extension.ts activate()","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:46:06Z","created_by":"petardjukic","updated_at":"2026-02-23T18:12:50Z","closed_at":"2026-02-23T18:12:50Z","close_reason":"Closed"}
{"id":"mage-9q0","title":"Create rel02.0-uc004 Issue Tracker View use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc004-issue-tracker-view.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R4: Issue Tracker, R5: Metrics Dashboard)\n- docs/specs/product-requirements/prd005-metrics-collection.yaml (InvocationRecord format)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc004-issue-tracker-view.yaml\n\nSummary: Developer opens the issues view in VS Code and sees all beads issues grouped by status (open, in_progress, closed). Expanding an issue shows description, dependencies, and InvocationRecord metrics (tokens, LOC delta, duration) from issue comments. The view auto-refreshes when .beads/issues.jsonl changes.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers issue listing, status grouping, InvocationRecord display, auto-refresh\n- Touchpoints reference prd006 R4 requirements\n- mage analyze passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:15Z","created_by":"petardjukic","updated_at":"2026-02-23T14:30:51Z","closed_at":"2026-02-23T14:30:51Z","close_reason":"Closed"}
{"id":"mage-9vl","title":"GH-5: Stitch: save log, stats, and code report on all exit paths","description":"Persist stitch history artifacts on all exit paths and add per-file stitch report.\n\nAC1-AC2 and AC4 are already implemented (failure-path log/stats saving, Status/Error fields in HistoryStats). Remaining work: AC3 (stitch-report.yaml with per-file diffstat) and AC5 (tests for failure-path saving and report generation).\n\nGitHub: petar-djukic/cobbler-scaffold#5","status":"open","priority":2,"issue_type":"epic","owner":"petar.djukic@gmail.com","created_at":"2026-02-24T20:23:17Z","created_by":"petardjukic","updated_at":"2026-02-24T20:23:17Z"}
{"id":"mage-9vl.1","title":"Add stitch report artifact with per-file diffstat","description":"deliverable_type: code\n\nrequired_reading:\n  - pkg/orchestrator/cobbler.go (HistoryStats, saveHistoryStats, saveHistoryLog, saveHistoryPrompt)\n  - pkg/orchestrator/stitch.go (doOneTask success path lines 469-494, gitDiffShortstat usage)\n  - pkg/orchestrator/gitops.go (existing git helpers, gitDiffShortstat)\n\nfiles:\n  - pkg/orchestrator/cobbler.go (add StitchReport struct, saveHistoryReport function)\n  - pkg/orchestrator/stitch.go (call saveHistoryReport from doOneTask success path)\n  - pkg/orchestrator/gitops.go (add gitDiffNameStatus helper)\n\nrequirements:\n  - R1: Add gitDiffNameStatus(ref) function that runs git diff --name-status against a ref and returns per-file entries (path, status, insertions, deletions)\n  - R2: Add StitchReport struct with fields task_id, task_title, status, branch, diff (aggregate), files (per-file list with path, status, insertions, deletions), loc_before, loc_after\n  - R3: Add saveHistoryReport(ts, report) function that writes {ts}-stitch-report.yaml to HistoryDir\n  - R4: Call saveHistoryReport from doOneTask success path after merge, before cleanup (around line 477 in stitch.go)\n  - R5: When HistoryDir is empty, saveHistoryReport must be a no-op (consistent with other save functions)\n\nacceptance_criteria:\n  - AC3 from GH-5: On successful stitch, {ts}-stitch-report.yaml is saved with file-level diffstat, LOC before/after, and task metadata\n  - Report YAML contains per-file breakdown (path, added/modified/deleted status, insertions, deletions)\n  - Existing stitch behavior is unchanged; only a new artifact is added","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-24T20:23:28Z","created_by":"petardjukic","updated_at":"2026-02-24T20:37:44Z","closed_at":"2026-02-24T20:37:44Z","close_reason":"Closed","dependencies":[{"issue_id":"mage-9vl.1","depends_on_id":"mage-9vl","type":"parent-child","created_at":"2026-02-24T15:23:28Z","created_by":"petardjukic","metadata":"{}"}],"comments":[{"id":3,"issue_id":"mage-9vl.1","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-24T20:37:44Z"}]}
{"id":"mage-9vl.2","title":"Add stitch failure-path and report tests","description":"deliverable_type: code\n\nrequired_reading:\n  - pkg/orchestrator/stitch.go (doOneTask failure paths at lines 402-418, 424-441, 449-465)\n  - pkg/orchestrator/cobbler.go (saveHistoryStats, saveHistoryReport, StitchReport)\n  - pkg/orchestrator/gitops.go (gitDiffNameStatus)\n  - pkg/orchestrator/measure_test.go (if exists, for test patterns)\n\nfiles:\n  - pkg/orchestrator/cobbler_test.go (test report YAML generation and per-file diffstat parsing)\n\nrequirements:\n  - R1: Test that StitchReport struct serializes to expected YAML format with all fields\n  - R2: Test gitDiffNameStatus parsing of git diff --name-status output for added, modified, deleted, and renamed files\n  - R3: Test saveHistoryReport writes correct file to history directory\n  - R4: Test saveHistoryReport is a no-op when HistoryDir is empty\n\nacceptance_criteria:\n  - AC5 from GH-5: New tests cover report generation and per-file diffstat parsing\n  - All existing tests continue to pass\n  - Tests are runnable via go test ./pkg/orchestrator/...","status":"open","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-24T20:23:37Z","created_by":"petardjukic","updated_at":"2026-02-24T20:23:37Z","dependencies":[{"issue_id":"mage-9vl.2","depends_on_id":"mage-9vl","type":"parent-child","created_at":"2026-02-24T15:23:36Z","created_by":"petardjukic","metadata":"{}"}]}
{"id":"mage-a2j","title":"Implement generation browser tree view (generationBrowser.ts)","description":"deliverable_type: code\noutput: vscode-extension/src/generationBrowser.ts\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2: Generation Browser, R6: Config View)\n- docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (tag naming: {prefix}*-start/finished/merged/abandoned)\n- vscode-extension/src/extension.ts (how to register TreeDataProvider)\n- vscode-extension/src/commands.ts (switch command for context menu)\n\nFiles to Create/Modify:\n- vscode-extension/src/generationBrowser.ts (create)\n- vscode-extension/src/extension.ts (register GenerationBrowserProvider for mage-orchestrator.status view)\n- vscode-extension/package.json (add context menu actions to view)\n\nRequirements:\n- GenerationBrowserProvider implements vscode.TreeDataProvider\u003cGenerationItem\u003e\n- Reads git tags via child_process.exec('git tag --list') to find generations\n- Derives lifecycle state from tag suffixes: has -start (created), has -finished (finished), has -merged (merged), has -abandoned (abandoned)\n- Shows version tag (v[REL].[DATE].[REVISION]) per generation if one exists\n- Current generation (active branch matches gen prefix) shows distinct icon (e.g., codicon 'play')\n- Child nodes show lifecycle tags and version tag\n- Context menu: 'Switch to Generation' calls mageOrchestrator.switch command\n- Refreshes via FileSystemWatcher on .git/refs/\n\nAcceptance Criteria:\n- Status view lists all generations with correct lifecycle state\n- Current generation distinguished visually\n- Version tags displayed when present\n- Switch context menu action triggers the switch command\n- Tree refreshes when .git/refs/ changes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:46:19Z","created_by":"petardjukic","updated_at":"2026-02-23T18:18:53Z","closed_at":"2026-02-23T18:18:53Z","close_reason":"Closed"}
{"id":"mage-a8d","title":"Implement vscode:push and vscode:pop mage targets","description":"deliverable_type: code\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R10)\n- magefiles/magefile.go (namespace pattern, scaffold:push/pop as model)\n- pkg/orchestrator/scaffold.go (push/pop implementation pattern)\n- pkg/orchestrator/commands.go (exec.Command wrappers)\n- vscode-extension/package.json (extension manifest)\n\nFiles to Create:\n- pkg/orchestrator/vscode.go (~120-180 lines)\n\nFiles to Modify:\n- magefiles/magefile.go (add Vscode namespace + Push/Pop methods, ~15 lines)\n- vscode-extension/package.json (add @vscode/vsce to devDependencies)\n\nRequirements:\n1. Create pkg/orchestrator/vscode.go with VscodePush() and VscodePop() methods on Orchestrator\n2. VscodePush flow: verify npm and code CLI exist -\u003e npm install in vscode-extension/ -\u003e npm run compile -\u003e npx @vscode/vsce package --no-dependencies -\u003e code --install-extension \u003cvsix path\u003e\n3. VscodePop flow: code --uninstall-extension mesh-intelligence.mage-orchestrator\n4. Log each step via logf() with timestamps\n5. Return actionable error messages when npm or code CLI is missing\n6. Add Vscode mg.Namespace to magefiles/magefile.go with Push() and Pop() methods following the scaffold namespace pattern\n7. Add @vscode/vsce to vscode-extension/package.json devDependencies\n\nDesign Decisions:\n- Use exec.Command directly (consistent with commands.go pattern) rather than shell invocation\n- The vscode-extension/ directory path is derived from the orchestrator repo root (os.Getwd), not from Config\n- vsix filename is derived from package.json name and version fields\n- Push always rebuilds from source (no caching)\n\nAcceptance Criteria:\n- mage vscode:push compiles the extension and installs it into VS Code\n- mage vscode:pop uninstalls the extension from VS Code\n- Both targets appear in mage -l output under the Vscode namespace\n- Push fails with clear error if npm is not installed\n- Push fails with clear error if code CLI is not installed\n- Pop is idempotent (succeeds even if extension is not installed)\n- mage analyze passes\n- go vet ./... passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T14:17:35Z","created_by":"petardjukic","updated_at":"2026-02-23T14:41:27Z","closed_at":"2026-02-23T14:41:27Z","close_reason":"Closed"}
{"id":"mage-ahl","title":"Create rel02.0-uc003 Branch Comparison use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc003-branch-comparison.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R3: Branch and Tag Comparison)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (tag naming conventions)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc003-branch-comparison.yaml\n\nSummary: Developer selects two version tags (v[REL].[DATE].[REV]) from a quick-pick list and sees a file-level summary of changes between them. Each changed file is clickable to open a VS Code diff editor. Developer can also compare two generation branches.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers tag selection, file summary, diff editor launch, generation branch comparison\n- Touchpoints reference prd006 R3 requirements\n- mage analyze passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:22Z","created_by":"petardjukic","updated_at":"2026-02-23T14:27:56Z","closed_at":"2026-02-23T14:27:56Z","close_reason":"Closed"}
{"id":"mage-bhc","title":"Create rel02.0-uc002 Generation Browser use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R2: Generation Browser Tree View)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml (example)\n- docs/specs/product-requirements/prd002-generation-lifecycle.yaml (lifecycle states)\n\nFiles to Create:\n- docs/specs/use-cases/rel02.0-uc002-generation-browser.yaml\n\nSummary: Developer opens VS Code status view and sees a tree of all generations derived from git tags. Each generation shows lifecycle state (-start, -finished, -merged, -abandoned), version tags, and highlights the current branch. Developer can switch to a generation from the tree context menu.\n\nAcceptance Criteria:\n- use-case-format YAML at correct path\n- Covers listing generations, showing lifecycle state, current branch indicator, switch action\n- Touchpoints reference prd006 R2 requirements\n- mage analyze passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:14Z","created_by":"petardjukic","updated_at":"2026-02-23T14:09:26Z","closed_at":"2026-02-23T14:09:26Z","close_reason":"Closed"}
{"id":"mage-cds","title":"Implement metrics dashboard webview","description":"Replace the placeholder 'not yet implemented' message for mageOrchestrator.showDashboard with a WebviewPanel displaying generation metrics. Should show token usage, lines of code deltas, issue throughput, and cycle timing from beads data. Depends on beads JSONL parser (mage-p2y).","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T20:01:04Z","created_by":"petardjukic","updated_at":"2026-02-24T19:29:36Z","closed_at":"2026-02-24T19:29:36Z","close_reason":"Closed","comments":[{"id":1,"issue_id":"mage-cds","author":"petardjukic","text":"tokens: 80000","created_at":"2026-02-24T19:29:36Z"}]}
{"id":"mage-fzl","title":"Implement extension infrastructure and lifecycle commands","description":"deliverable_type: code\noutput: vscode-extension/src/\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R1: Lifecycle Commands, R7: Infrastructure)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml\n- vscode-extension/src/extension.ts (current stub)\n- vscode-extension/package.json (current commands and views)\n\nFiles to Create/Modify:\n- vscode-extension/src/extension.ts (replace stub with real activate/deactivate)\n- vscode-extension/src/commands.ts (all lifecycle commands)\n- vscode-extension/package.json (register all commands and views)\n\nRequirements:\n- activate() registers all commands, tree providers, watchers, output channel\n- Commands: mageOrchestrator.start, .run, .resume, .stop, .reset, .switch, .cobblerMeasure, .cobblerStitch\n- Each command executes the corresponding mage target in an integrated terminal (vscode.window.createTerminal)\n- Start, Stop, Reset show confirmation dialogs (vscode.window.showWarningMessage)\n- Switch shows quick-pick of generation branches from git branch list\n- deactivate() disposes all watchers, terminals, subscriptions\n- Output channel named 'Mage Orchestrator' for error logging\n- FileSystemWatcher on .beads/, .git/refs/, configuration.yaml\n\nAcceptance Criteria:\n- All commands appear in Command Palette when configuration.yaml exists\n- Each command runs the correct mage target in integrated terminal\n- Destructive commands show confirmation dialog\n- Switch shows branch quick-pick\n- Extension activates only when configuration.yaml present (workspaceContains)\n- mage test:unit passes (TypeScript compilation via tsc)","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:35Z","created_by":"petardjukic","updated_at":"2026-02-23T16:26:00Z","closed_at":"2026-02-23T16:26:00Z","close_reason":"Closed"}
{"id":"mage-n7y","title":"Implement branch and tag comparison view","description":"Implement a view that compares branches and tags for generation cycles. Should show diff stats between generation branches (e.g., files changed, lines added/removed) and allow navigating to changed files. Specified in rel02.0-uc003 branch comparison use case.","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T20:00:58Z","created_by":"petardjukic","updated_at":"2026-02-24T19:37:05Z","closed_at":"2026-02-24T19:37:05Z","close_reason":"Closed","comments":[{"id":2,"issue_id":"mage-n7y","author":"petardjukic","text":"tokens: 45000","created_at":"2026-02-24T19:37:05Z"}]}
{"id":"mage-p2y","title":"Implement beads JSONL parser and InvocationRecord extraction","description":"Parse .beads/issues.jsonl to extract InvocationRecord data for display in the extension. The file watcher for .beads/** already exists in extension.ts but has no backing parser. Implement a JSONL parser that reads beads issue data and exposes it as a typed interface for consumption by tree views and the metrics dashboard.","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T20:00:47Z","created_by":"petardjukic","updated_at":"2026-02-24T19:16:07Z","closed_at":"2026-02-24T19:16:07Z","close_reason":"Closed"}
{"id":"mage-u4p","title":"Add R8 Specification Browser and R9 Code-to-Spec Traceability to prd006","description":"deliverable_type: documentation\nformat_rule: prd-format (update existing)\noutput_path: docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequired Reading:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (full)\n- docs/ARCHITECTURE.yaml\n- docs/constitutions/design.yaml (prd-format rules)\n\nFiles to Modify:\n- docs/specs/product-requirements/prd006-vscode-extension.yaml\n\nRequirements:\nR8 - Specification Browser: tree panel listing use cases (docs/specs/use-cases/*.yaml). Each use case node expands to PRD touchpoints; each requirement node expands to source files matching grep of PRD ID in pkg/. Clicking any node opens the corresponding YAML or source file. Top-level groups for PRDs and test suites. Refreshes via FileSystemWatcher on docs/specs/.\n\nR9 - Code-to-Spec Traceability: CodeLensProvider for Go source files. Detects comments with pattern '// prd: \u003cprd-id\u003e \u003creq-id\u003e' and '// uc: \u003cuc-id\u003e'. Each tag renders a 'View Requirement' CodeLens that opens the referenced spec YAML.\n\nAcceptance Criteria:\n- R8 and R9 added to prd006 in correct prd-format structure\n- R8 describes spec tree view with navigation from use case to requirement to source\n- R9 defines tagging convention and CodeLens behavior\n- mage analyze passes after update","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:44:51Z","created_by":"petardjukic","updated_at":"2026-02-23T13:55:01Z","closed_at":"2026-02-23T13:55:01Z","close_reason":"Closed"}
{"id":"mage-zh8","title":"Create rel02.0-uc006 Specification Browser use case","description":"deliverable_type: documentation\nformat_rule: use-case-format\noutput_path: docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml\n\nRequired Reading:\n- docs/constitutions/design.yaml (use-case-format rules)\n- docs/specs/product-requirements/prd006-vscode-extension.yaml (R8 and R9, added by mage-u4p)\n- docs/specs/use-cases/rel02.0-uc001-lifecycle-commands.yaml (example use case)\n- docs/road-map.yaml (add uc006 to rel02.0 release)\n\nFiles to Create/Modify:\n- docs/specs/use-cases/rel02.0-uc006-specification-browser.yaml (create)\n- docs/road-map.yaml (add uc006 entry to rel02.0)\n\nRequired Sections (use-case-format):\nid, title, summary, actor, trigger, flow, touchpoints (linking to prd006 R8/R9), success_criteria, out_of_scope, dependencies, risks\n\nSummary: A developer opens the Specification Browser panel in VS Code and navigates from a use case to its PRD requirements, and from a requirement to the source files implementing it. Conversely, the developer opens a Go source file containing a prd: or uc: tag and uses the CodeLens to jump directly to the referenced spec document.\n\nAcceptance Criteria:\n- use-case-format YAML created at correct path\n- Covers both directions: spec-to-code and code-to-spec\n- Touchpoints reference prd006 R8 and R9\n- road-map.yaml updated with uc006 entry under rel02.0\n- mage analyze passes","status":"closed","priority":2,"issue_type":"task","owner":"petar.djukic@gmail.com","created_at":"2026-02-23T13:45:02Z","created_by":"petardjukic","updated_at":"2026-02-23T14:26:28Z","closed_at":"2026-02-23T14:26:28Z","close_reason":"Closed"}
